

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ScanPlan objects &mdash; xpdAcq 0.5 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xpdAcq 0.5 documentation" href="index.html"/>
        <link rel="up" title="For XPD Users" href="xpdusers.html"/>
        <link rel="next" title="Where did all my Sample and Scan objects go?????" href="usb_Where.html"/>
        <link rel="prev" title="Setting up your XPD acuisition objects" href="usb_Experiment.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xpdAcq
          

          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpdusers.html">For XPD Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sb_overview.html">Overview of xpd acquisition environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="sb_icollection.html">Overview of the icollection+xpdAcq environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Beamtime.html">Setting up your Beamtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Experiment.html">Setting up your XPD acuisition objects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ScanPlan objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-scanplans">Setting up ScanPlans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-table-on-scanplan">Summary table on ScanPlan:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html">Where did all my Sample and Scan objects go?????</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-is-your-friends">bt.list() is your friends</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-and-bt-get-gotchas">bt.list() and bt.get() Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Running.html">Running scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_QuickAssess.html">Initial assessment of your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_GlobalOptions.html">Global options</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">For Beamline Staff</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_note.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">xpdAcq</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="xpdusers.html">For XPD Users</a> &raquo;</li>
      
    <li>ScanPlan objects</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usb_Scan.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scanplan-objects">
<span id="usb-scan"></span><h1>ScanPlan objects<a class="headerlink" href="#scanplan-objects" title="Permalink to this headline">¶</a></h1>
<p>ScanPlan objects (of type <code class="docutils literal"><span class="pre">'sp'</span></code> ) are created just like <a class="reference internal" href="usb_Experiment.html#usb-experiment"><span class="std std-ref">Experiment and Sample</span></a> objects,
but they serve a slightly different purpose and so we deal with them separately here. To review the syntax
of creating (<em>instantiating</em> ) and retrieving (<code class="docutils literal"><span class="pre">bt.get()</span></code> ) acquire objects in general, please review
the information <a class="reference internal" href="usb_Experiment.html#usb-experiment"><span class="std std-ref">here</span></a> and <a class="reference internal" href="usb_Where.html#usb-where"><span class="std std-ref">here</span></a> , respectively.</p>
<p>Firstly, what is a scanplan?  A scanplan is a grouped set of detector exposures.  The set may
contain just one exposure (we call that a count scan, <code class="docutils literal"><span class="pre">'ct'</span></code> ).  Or it may be a series of exposures
taken one after the other, possibly with a delay between.  We
call that a time-series (or <code class="docutils literal"><span class="pre">'tseries'</span></code> ).  Another popular one that is supported is the
a temperature series, or temperature ramp, <code class="docutils literal"><span class="pre">'Tramp'</span></code>.  More are also on the way, but
these simple scanplans may also be combined together in scripts, giving the user significant
control over how to construct their experiment.</p>
<p>To run a scan we need a <em>ScanPlan</em> and a <em>Sample</em>.  The ScanPlan is the detailed description of
what the scan will do, but it doesn&#8217;t generate any <em>scan</em> until it is run on a particular sample.
Separating a scan into a plan and an execution (which is different than how SPEC works
for those old enough) makes it very easy to run a number of different samples with the
exact same scanplan, or (if you really want to) to collect dark images with exactly the same scan pattern, and so on.
We also want to save scan metadata accurately when the scan is actually run.  To ensure
this, each scan object takes the scanplan parameters and it uses the same parameters
both to run the scan at run-time, and to save them, along with the sample information,
in the metadata for each exposure.</p>
<p>With this in mind, the workflow is that <em>we never edit a scanplan and rerun it</em> (stop that you SPEC people!).
What we do is that we create a new ScanPlan object, <strong>and give it a different name</strong>,
every time we want to do a different, <em>even slightly different</em>, scan. These are all
saved for reload and will be sent home with you at the end of the experiment.  A word of advice:
come up with your own easy to remember naming scheme. For example, when you create
a <code class="docutils literal"><span class="pre">'ct'</span></code> scan object use the scheme <code class="docutils literal"><span class="pre">'ct&lt;#&gt;'</span></code> where you replace <code class="docutils literal"><span class="pre">&lt;#&gt;</span></code> with the length
of the count in seconds, so a 1.5 second exposure would be named <code class="docutils literal"><span class="pre">'ct1.5'</span></code>.  You might
call temperature ramps as <code class="docutils literal"><span class="pre">T</span></code>.  These take start temperature, stop temperature and step size,
so a good naming scheme would be <code class="docutils literal"><span class="pre">'T&lt;startT&gt;.&lt;stopT&gt;.&lt;Tstep&gt;'</span></code>, e.g., <code class="docutils literal"><span class="pre">'T300.500.10'</span></code>.</p>
<div class="section" id="setting-up-scanplans">
<h2>Setting up ScanPlans<a class="headerlink" href="#setting-up-scanplans" title="Permalink to this headline">¶</a></h2>
<p>Typing <code class="docutils literal"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">ScanPlan?</span></code> returns</p>
<dl class="function">
<dt id="xpdacq.beamtime.ScanPlan">
<code class="descclassname">xpdacq.beamtime.</code><code class="descname">ScanPlan</code><span class="sig-paren">(</span><em>beamtime</em>, <em>plan_func</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.beamtime.ScanPlan" title="Permalink to this definition">¶</a></dt>
<dd><p>class that carries scan plan with corresponding experimental arguements</p>
<p>after creation, this Sample object will be related to Beamtime
object given as argument and will be available in bt.list()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>beamtime</strong> (<em>xpdacq.beamtime.Beamtime</em>) &#8211; object representing current beamtime.</li>
<li><strong>plan_func</strong> &#8211; predefined plan function. For complete list of available functions,
please refere to <a class="reference external" href="http://xpdacq.github.io">http://xpdacq.github.io</a> for more information.</li>
<li><strong>args</strong> &#8211; positional arguments corresponding to plan function in used.</li>
<li><strong>kwargs</strong> &#8211; keyword arguments corresponding to plan function in used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>A <cite>ct</cite> (count) scan with 5s exposure time linked to Beamtime object <cite>bt</cite>.
&gt;&gt;&gt; ScanPlan(bt, ct, 5)</p>
<p><cite>ScanPlan</cite> class also takes keyword arguments.
&gt;&gt;&gt; ScanPlan(bt, ct, exposure=5)</p>
<p>Please refer to <a class="reference external" href="http://xpdacq.github.io">http://xpdacq.github.io</a> for more examples.</p>
</dd></dl>

<p>Here are some examples of valid count-type ScanPlan definitions:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="n">bt</span><span class="p">,</span> <span class="n">ct</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>                      <span class="c1"># the simplest count scan definition</span>
</pre></div>
</div>
<dl class="docutils">
<dt>A few things to note:</dt>
<dd># First argument is always <code class="docutils literal"><span class="pre">bt</span></code>, beamtime object.
* Because <code class="docutils literal"><span class="pre">count</span></code> type <code class="docutils literal"><span class="pre">ScanPlans</span></code>, the second argument is always <code class="docutils literal"><span class="pre">'ct'</span></code>.
* The scan parameter is fed in after scan type, starting from the third positional argument.</dd>
<dt>Types of ScanPlan available in current version:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">'ct'</span></code> just exposes the the detector for a number of seconds. e.g.,  <code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">ct,</span> <span class="pre">17.5)</span></code></li>
<li><code class="docutils literal"><span class="pre">'tseries'</span></code> executes a series of <code class="docutils literal"><span class="pre">'num'</span></code> counts of exposure time <code class="docutils literal"><span class="pre">'exposure'</span></code> seconds with  a delay of <code class="docutils literal"><span class="pre">'delay'</span></code> seconds between them.  e.g., <code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">tseries,</span> <span class="pre">1,</span> <span class="pre">59,</span> <span class="pre">50)</span></code> will measure 50 scans of 1 second with a delay of 59 seconds in between each of them.</li>
<li><code class="docutils literal"><span class="pre">'Tramp'</span></code> executes a temperature ramp from <code class="docutils literal"><span class="pre">'startingT'</span></code> to <code class="docutils literal"><span class="pre">'endingT'</span></code> in temperature steps of <code class="docutils literal"><span class="pre">'Tstep'</span></code> with exposure time of <code class="docutils literal"><span class="pre">'exposure'</span></code>.  e.g., <code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tramp,</span> <span class="pre">1,</span> <span class="pre">200,</span> <span class="pre">500,</span> <span class="pre">5)</span></code> will automatically change the temperature,
starting at 200 K and ending at 500 K, measuring a scan of 1 s at every 5 K step. The temperature controller will hold at each temperature until the temperature stabilizes before starting the measurement.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="summary-table-on-scanplan">
<h2>Summary table on ScanPlan:<a class="headerlink" href="#summary-table-on-scanplan" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ScanPlan</th>
<th class="head">Syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ct</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">ct,</span> <span class="pre">17.5)</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">tseries</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">tseries,</span> <span class="pre">1,</span> <span class="pre">59,</span> <span class="pre">50)</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Tramp</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan(bt,</span> <span class="pre">Tramp</span> <span class="pre">,</span> <span class="pre">1,</span> <span class="pre">200,</span> <span class="pre">500,</span> <span class="pre">5)</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>OK, it is time to <a class="reference internal" href="usb_Running.html#usb-running"><span class="std std-ref">run our scans</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usb_Where.html" class="btn btn-neutral float-right" title="Where did all my Sample and Scan objects go?????" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usb_Experiment.html" class="btn btn-neutral" title="Setting up your XPD acuisition objects" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright (c) 2016 trustees of Columbia University in the City of New York.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>