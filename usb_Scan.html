

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ScanPlan objects &mdash; xpdAcq 0.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xpdAcq 0.3 documentation" href="index.html"/>
        <link rel="up" title="XPD Users" href="xpdusers.html"/>
        <link rel="next" title="Running scans" href="usb_Running.html"/>
        <link rel="prev" title="Where did all my Sample and Scan objects go?????" href="usb_Where.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xpdAcq
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpdusers.html">XPD Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sb_overview.html">Overview of xpd acquisition environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="sb_icollection.html">Overview of the icollection+xpdacq environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Beamtime.html">Setting up your Beamtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Experiment.html">Setting up your XPD acuisition objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html">Where did all my Sample and Scan objects go?????</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-and-bt-get-are-your-friends">bt.list() and bt.get() are your friends</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-and-bt-get-gotchas">bt.list() and bt.get() Gotchas</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ScanPlan objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-scanplans">Setting up ScanPlans</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-table-on-scanplan">Summary table on ScanPlan:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#auto-naming-scheme">Auto-naming scheme</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usb_Running.html">Running scans</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_QuickAssess.html">Initial assessment of your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_functionality.html">Useful Functionalities</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">Beamline Staff</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">xpdAcq</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="xpdusers.html">XPD Users</a> &raquo;</li>
      
    <li>ScanPlan objects</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usb_Scan.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scanplan-objects">
<span id="usb-scan"></span><h1>ScanPlan objects<a class="headerlink" href="#scanplan-objects" title="Permalink to this headline">¶</a></h1>
<p>ScanPlan objects (of type <code class="docutils literal"><span class="pre">'sp'</span></code> ) are created just like <a class="reference internal" href="usb_Experiment.html#usb-experiment"><span class="std std-ref">Experiment and Sample</span></a> objects,
but they serve a slightly different purpose and so we deal with them separately here. To review the syntax
of creating (<em>instantiating</em> ) and retrieving (<code class="docutils literal"><span class="pre">bt.get()</span></code> ) acquire objects in general, please review
the information <a class="reference internal" href="usb_Experiment.html#usb-experiment"><span class="std std-ref">here</span></a> and <a class="reference internal" href="usb_Where.html#usb-where"><span class="std std-ref">here</span></a> , respectively.</p>
<p>Firstly, what is a scanplan?  A scanplan is a grouped set of detector exposures.  The set may
contain just one exposure (we call that a count scan, <code class="docutils literal"><span class="pre">'ct'</span></code> ).  Or it may be a series of exposures
taken one after the other, possibly with a delay between.  We
call that a time-series (or <code class="docutils literal"><span class="pre">'tseries'</span></code> ).  Another popular one that is supported is the
a temperature series, or temperature ramp, <code class="docutils literal"><span class="pre">'Tramp'</span></code>.  More are also on the way, but
these simple scanplans may also be combined together in scripts, giving the user significant
control over how to construct their experiment.</p>
<p>To run a scan we need a <em>ScanPlan</em> and a <em>Sample</em>.  The ScanPlan is the detailed description of
what the scan will do, but it doesn&#8217;t generate any <em>scan</em> until it is run on a particular sample.
Separating a scan into a plan and an execution (which is different than how SPEC works
for those old enough) makes it very easy to run a number of different samples with the
exact same scanplan, or (if you really want to) to collect dark images with exactly the same scan pattern, and so on.
We also want to save scan metadata accurately when the scan is actually run.  To ensure
this, each scan object takes the scanplan parameters and it uses the same parameters
both to run the scan at run-time, and to save them, along with the sample information,
in the metadata for each exposure.</p>
<p>With this in mind, the workflow is that <em>we never edit a scanplan and rerun it</em> (stop that you SPEC people!).
What we do is that we create a new ScanPlan object, <strong>and give it a different name</strong>,
every time we want to do a different, <em>even slightly different</em>, scan. These are all
saved for reload and will be sent home with you at the end of the experiment.  A word of advice:
come up with your own easy to remember naming scheme. For example, when you create
a <code class="docutils literal"><span class="pre">'ct'</span></code> scan object use the scheme <code class="docutils literal"><span class="pre">'ct&lt;#&gt;'</span></code> where you replace <code class="docutils literal"><span class="pre">&lt;#&gt;</span></code> with the length
of the count in seconds, so a 1.5 second exposure would be named <code class="docutils literal"><span class="pre">'ct1.5'</span></code>.  You might
call temperature ramps as <code class="docutils literal"><span class="pre">T</span></code>.  These take start temperature, stop temperature and step size,
so a good naming scheme would be <code class="docutils literal"><span class="pre">'T&lt;startT&gt;.&lt;stopT&gt;.&lt;Tstep&gt;'</span></code>, e.g., <code class="docutils literal"><span class="pre">'T300.500.10'</span></code>.</p>
<div class="section" id="setting-up-scanplans">
<h2>Setting up ScanPlans<a class="headerlink" href="#setting-up-scanplans" title="Permalink to this headline">¶</a></h2>
<p>Typing <code class="docutils literal"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">ScanPlan?</span></code> returns</p>
<dl class="function">
<dt id="xpdacq.beamtime.ScanPlan">
<<<<<<< HEAD
<code class="descclassname">xpdacq.beamtime.</code><code class="descname">ScanPlan</code><span class="sig-paren">(</span><em>scanplan_meta</em>, <em>scanplan_params={}</em>, <em>dk_window=None</em>, <em>shutter=True</em>, <em>*</em>, <em>auto_dark_plan=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.beamtime.ScanPlan" title="Permalink to this definition">¶</a></dt>
=======
<code class="descclassname">xpdacq.beamtime.</code><code class="descname">ScanPlan</code><span class="sig-paren">(</span><em>name</em>, <em>scanplan_type=''</em>, <em>scanplan_params={}</em>, <em>dk_window=None</em>, <em>shutter=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.beamtime.ScanPlan" title="Permalink to this definition">¶</a></dt>
>>>>>>> a4fadb6ab1bc422801a17637d501f6782efeb7fd
<dd><p>ScanPlan class  that defines scan plan to run.</p>
<p>To run it <code class="docutils literal"><span class="pre">prun(Sample,</span> <span class="pre">ScanPlan)</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>scanplan_meta</strong> (<em>str</em>) &#8211; <p>An important postional argument that serves two purpose:</p>
<dl class="docutils">
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>. If you wish to use auto-naming functionality.</dt>
<dd>Please supply this field with a string following allowed scheme, xpdAcq will parse your arguments.
Currently allowed scheme is like following:<ol class="arabic">
<li>&#8216;ct_10&#8217; means Count scan with 10s exposure time in total</li>
<li>&#8216;Tramp_10_300_200_5&#8217; means temperature ramp from 300k to 200k</li>
</ol>
<blockquote>
<div>with 5k step and 10s exposure time each</div></blockquote>
<ol class="arabic" start="3">
<li>&#8216;tseries_10_60_5&#8217; means time series scan of 10s exposure time each scan</li>
</ol>
<blockquote class="last">
<div>and run for 5 scans with 60s delay between them.
If you don&#8217;t want any delay, give it an 0.</div></blockquote>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">*</span></a>. If you wish to specify parameters explicitly.</dt>
<dd>This field will be &#8220;ScanPlan type&#8221;. Currently allowed types are:<ol class="arabic">
<li>&#8216;ct&#8217;: which means a count scanplan with exposure time given</li>
</ol>
<p>2. &#8216;tseries&#8217; : which means a time series scanplan with
exposure time, dely between scans and number of scans specified.</p>
<p>3. &#8216;Tramp&#8217; : which means a temperature ramp scanplan with
exposure time, starting temperature, ending temperature and
temperature step specified.</p>
<p>4. &#8216;bluesky&#8217; : which means an arbitrary bluesky plan defined by user
For more information please go to : <a class="reference external" href="https://nsls-ii.github.io/bluesky/plans.html">https://nsls-ii.github.io/bluesky/plans.html</a>
for complete guide on how to define a plan. Note: bluesky type
of plan doesn&#8217;t work with auto-naming, you must specify
explicitly.</p>
<p class="last">Note:
&#8216;bluesky&#8217; plan won&#8217;t be saved as reusalbe form. Everytime you define a bluesky plan,
we <strong>SUGGEST</strong> you to save code that defines your plan in a separate place (for example, a text file)</p>
</dd>
</dl>
</li>
<li><strong>scan_params</strong> (<em>dict</em>) &#8211; Optional. Needed if you wish to set up ScanPlan explicitly.
It contains all scan parameters that will be passed and used at run-time
Don&#8217;t make typos in the dictionary keywords or your scans won&#8217;t work.
Entire list of allowed keywords is in the documentation on <a class="reference external" href="https://xpdacq.github.io/">https://xpdacq.github.io/</a></li>
<li><strong>shutter</strong> (<em>bool</em>) &#8211; default is True. If True, in-hutch fast shutter will be opened before a scan and closed afterwards.
Otherwise control of the shutter is left external. Set to False if you want to control the shutter by hand.</li>
<li><strong>auto_dark_plan</strong> (<em>bool</em>) &#8211; argument reserved for auto_dark collection functionality.
Ususally user doesn&#8217;t have to specify</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Here are examples of instantiating ScanPlan objects with explicit form.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;tseries&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span><span class="s1">&#39;num&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;Tramp&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="s1">&#39;sartingT&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;endinT&#39;</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;Tstep&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
</pre></div>
</div>
<p>Here are examples of instantiating ScanPlan objects with auto naming scheme.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_2.5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;tseries_2.5_60_5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;Tramp_2.5_300_200_5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>ScanPlan objects from two sets of examples are equivalent.</p>
<p>Here is an example on how to instantiate ScanPlan carrying a bluesky plan
that reads area detector and em channel while moving two-theta motor from -1 to 1 in 20 steps.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bluesky.plans</span> <span class="k">import</span> <span class="n">AbsScanPlan</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myscan</span> <span class="o">=</span> <span class="n">AbsScanPlan</span><span class="p">([</span><span class="n">pe1c</span><span class="p">,</span> <span class="n">em</span><span class="p">],</span> <span class="n">tth_cal</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;bluesky&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;bluesky_plan&#39;</span><span class="p">:</span> <span class="n">myscan</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<p>Firstly, we see required and optional arguments
that we have to give <code class="docutils literal"><span class="pre">ScanPlan</span></code> (optional arguments have a default value indicated
by the <code class="docutils literal"><span class="pre">=</span></code> sign.  If that argument is not specified it will take the default
value).  The <code class="docutils literal"><span class="pre">Docstring</span></code> field has some more explanation about what these different
arguments are.  The docstring is documentation written in the code itself by the
programmer and may be more or less valuable and accurate (though good programmers
write good Docstrings!).  The <code class="docutils literal"><span class="pre">Init</span> <span class="pre">signature</span></code> is absolutely accurate and
up to date, so if they are not 100% in agreement, go with the signature.</p>
<p>The argument types are given in the Docstring. <code class="docutils literal"><span class="pre">self</span></code> is always ignored, so
the first given argument is <code class="docutils literal"><span class="pre">scanname</span></code> and is a string (make sure to enclose strings in
single or double quotes when you give it, i.e., <code class="docutils literal"><span class="pre">'myscan'</span></code> or <code class="docutils literal"><span class="pre">&quot;myscan&quot;</span></code> will
work but <code class="docutils literal"><span class="pre">myscan</span></code> will not).  The second argument is a string that denotes the scan type. At the time
or writing the only ones available are <code class="docutils literal"><span class="pre">'ct'</span></code>, <code class="docutils literal"><span class="pre">'tseries'</span></code> and <code class="docutils literal"><span class="pre">'Tramp'</span></code>.  If you give
any other string values the ScanPlan will be created no problem, but it
will not run if you try it!  The third and last given required-argument is <code class="docutils literal"><span class="pre">scan_params</span></code>
and is a dictionary that contains one or more key:value pairs.  In this case
the &#8220;keys&#8221; are fixed quantities, where the required keys depends on the scan-type.  Please see
the examples below.  The &#8220;values&#8221; are the values of those parameters that you want
for your particular scan-plan.  Python dictionaries are written in the form <code class="docutils literal"><span class="pre">{key1:value1,key2:value2,....,lastkey:lastvalue}</span></code></p>
<p>Here are some examples of valid count-type ScanPlan definitions:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_1.5&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mf">1.5</span><span class="p">})</span>                      <span class="c1"># the simplest count scan definition</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_1.5&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mf">1.5</span><span class="p">},</span><span class="n">shutter</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>   <span class="c1"># same scan as before but let&#39;s do the shutter by hand (be careful!)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_100.5&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mf">100.5</span><span class="p">},</span><span class="n">livetable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>    <span class="c1"># nice long scan but we don&#39;t want to clutter our terminal with the table showing the counts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_2&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span><span class="n">verify_write</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>     <span class="c1"># we want to be sure the tiff was written in pe1_data, but pay a price of a ~ 1 second overhead.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_2&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span><span class="n">verify_write</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">shutter</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="c1"># hopefully you are getting the idea.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;ct_2&#39;</span><span class="p">,</span><span class="s1">&#39;ct&#39;</span><span class="p">,{</span><span class="s1">&#39;exposure&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>                               <span class="c1"># this will also work in xpdAcq because we can reference this object with bt.list() and bt.get()</span>
</pre></div>
</div>
<dl class="docutils">
<dt>A few things to note:</dt>
<dd><ul class="first last simple">
<li>Because all count ScanPlans, the second argument is always <code class="docutils literal"><span class="pre">'ct'</span></code>.</li>
<li><strong>They all have different names</strong> (the first argument!).  This is necessary in xpdAcq!  On a side note, though it is not OK in Python in general, in xpdAcq it <em>is</em> OK for you to make the assignment (i.e., <code class="docutils literal"><span class="pre">sc</span> <span class="pre">=</span> <span class="pre">...</span></code>) the same in each case. This would be bad in regular python programming because you would be repeatedly reassigning the same python object (<code class="docutils literal"><span class="pre">sc</span></code>) with different definitions and they will all be lost except the most recent definition.  However, in xpdAcq we should always reference our objects using <code class="docutils literal"><span class="pre">bt.list()</span></code> then <code class="docutils literal"><span class="pre">bt.get()</span></code> (<a class="reference internal" href="usb_Where.html#usb-where"><span class="std std-ref">remember?</span></a>).  This means that the objects instantiated this way are all saved correctly even with the same assignment, <em>as long as they have different names</em>. We can even do some Python insanity such as the last ScanPlan definition shown in the examples.  This object is created with no assignment so there is no way for Python to reference it, but we can in xpdAcq with <code class="docutils literal"><span class="pre">bt.list()</span></code> and <code class="docutils literal"><span class="pre">bt.get()</span></code>.</li>
<li>It is quite possible to successfully define an incorrectly composed ScanPlan object but we have tools that can validate your <code class="docutils literal"><span class="pre">ScanPlan</span></code> objects by the time of instantiation. Validator will tell you which filelds are missing through a warning, please follow the instruction from warning message and modify your code. You can run your ScanPlan and Sample object with <code class="docutils literal"><span class="pre">dryrun()</span></code> to have a look on how your metadata will be recorded. See <a class="reference internal" href="usb_Running.html#usb-running"><span class="std std-ref">Running scans</span></a>.</li>
<li>The scan_params syntax is a bit clunky and delicate.  Please just be careful for now.  Later we will give helper functions and maybe a GUI (if we can get funding for a summer student).  Let&#8217;s all pray to the funding gods!</li>
</ul>
</dd>
<dt>Types of ScanPlan available in current version:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">'ct'</span></code> just exposes the the detector for a number of seconds. e.g.,  <code class="docutils literal"><span class="pre">ScanPlan('ct17.5s','ct',{'exposure':17.5})</span></code></li>
<li><code class="docutils literal"><span class="pre">'tseries'</span></code> executes a series of <code class="docutils literal"><span class="pre">'num'</span></code> counts of exposure time <code class="docutils literal"><span class="pre">'exposure'</span></code> seconds with  a delay of <code class="docutils literal"><span class="pre">'delay'</span></code> seconds between them.  e.g., <code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50','tseries',{'num':50,'exposure':1,'delay':59})</span></code> will measure 50 scans of 1 second with a delay of 59 seconds in between each of them.</li>
<li><code class="docutils literal"><span class="pre">'Tramp'</span></code> executes a temperature ramp from <code class="docutils literal"><span class="pre">'startingT'</span></code> to <code class="docutils literal"><span class="pre">'endingT'</span></code> in temperature steps of <code class="docutils literal"><span class="pre">'Tstep'</span></code> with exposure time of <code class="docutils literal"><span class="pre">'exposure'</span></code>.  e.g., <code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5','Tramp',{'startingT':200,</span> <span class="pre">'endingT':500,</span> <span class="pre">'Tstep':5,</span> <span class="pre">'exposure':1})</span></code> will automatically change the temperature,
starting at 200 K and ending at 500 K, measuring a scan of 1 s at every 5 K step. The temperature controller will hold at each temperature until the temperature stabilizes before starting the measurement.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="summary-table-on-scanplan">
<h2>Summary table on ScanPlan:<a class="headerlink" href="#summary-table-on-scanplan" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ScanPlan</th>
<th class="head">Syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ct</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('ct17.5','ct',{'exposure':17.5})</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">tseries</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('tseries_1_59_50','tseries',{'num':50,'exposure':1,'delay':59})</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Tramp</span></code></td>
<td><code class="docutils literal"><span class="pre">ScanPlan('Tramp_1_200_500_5','Tramp',{'startingT':200,</span> <span class="pre">'endingT':500,</span> <span class="pre">'Tstep':5,</span> <span class="pre">'exposure':1})</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="auto-naming-scheme">
<h2>Auto-naming scheme<a class="headerlink" href="#auto-naming-scheme" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">xpdAcq</span></code> also supports auto-naming on <code class="docutils literal"><span class="pre">ScanPlan</span></code> objects. When you only give ScanPlan name,
program automatically parses your ScanPlan name. Here is the format xpdAcq takes on ScanPlan name:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>1. &#39;ct_10&#39; means Count scan with 10s exposure time in total
2. &#39;Tramp_10_300_200_5&#39; means temperature ramp from 300k to 200k
  with 5k step and 10s exposure time each
3. &#39;tseries_10_60_5&#39; means time series scan of 10s exposure time each scan
  and run for 5 scans with 60s delay between them.
</pre></div>
</div>
<p>If your wish to use auto-naming, your ScanPlan name <em>must</em> follow format above.
Once your ScanPlan name is successfully parsed, you should see a summary output
on your parameters like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;tseries_5_60_5&#39;</span><span class="p">)</span>
<span class="n">You</span> <span class="n">have</span> <span class="n">created</span> <span class="n">a</span> <span class="s2">&quot;tseries&quot;</span> <span class="nb">type</span> <span class="n">ScanPlan</span> <span class="k">with</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tseries_5_60_5&quot;</span>
<span class="n">Corresponding</span> <span class="n">scan</span> <span class="n">parameters</span> <span class="n">are</span><span class="p">:</span>
<span class="n">exposure</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">delay</span> <span class="o">=</span> <span class="mf">60.0</span>
<span class="n">num</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="k">with</span> <span class="n">fast</span><span class="o">-</span><span class="n">shutter</span> <span class="n">control</span> <span class="o">=</span> <span class="bp">True</span> <span class="ow">and</span> <span class="n">subscribing</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;livetable&#39;</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">ScanPlan</span><span class="p">(</span><span class="s1">&#39;tseries_5_60_5&#39;</span><span class="p">,</span> <span class="n">livetable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">You</span> <span class="n">have</span> <span class="n">created</span> <span class="n">a</span> <span class="s2">&quot;tseries&quot;</span> <span class="nb">type</span> <span class="n">ScanPlan</span> <span class="k">with</span> <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tseries_5_60_5_nLT&quot;</span>
<span class="n">Corresponding</span> <span class="n">scan</span> <span class="n">parameters</span> <span class="n">are</span><span class="p">:</span>
<span class="n">exposure</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">delay</span> <span class="o">=</span> <span class="mf">60.0</span>
<span class="n">num</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="k">with</span> <span class="n">fast</span><span class="o">-</span><span class="n">shutter</span> <span class="n">control</span> <span class="o">=</span> <span class="bp">True</span> <span class="ow">and</span> <span class="n">subscribing</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>You can also find options like <code class="docutils literal"><span class="pre">LiveTable</span></code>, <code class="docutils literal"><span class="pre">shutter</span></code>
or <code class="docutils literal"><span class="pre">verify_write</span></code> will be added as suffixes to ScanPlan name automatically.</p>
<p>OK, it is time to <a class="reference internal" href="usb_Running.html#usb-running"><span class="std std-ref">run our scans</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usb_Running.html" class="btn btn-neutral float-right" title="Running scans" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usb_Where.html" class="btn btn-neutral" title="Where did all my Sample and Scan objects go?????" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright (c) 2016 trustees of Columbia University in the City of New York.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>