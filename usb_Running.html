

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running scans &mdash; xpdAcq 0.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xpdAcq 0.3 documentation" href="index.html"/>
        <link rel="up" title="XPD Users" href="xpdusers.html"/>
        <link rel="next" title="Initial assessment of your data" href="usb_QuickAssess.html"/>
        <link rel="prev" title="ScanPlan objects" href="usb_Scan.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> xpdAcq
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="xpdusers.html">XPD Users</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sb_overview.html">Overview of xpd acquisition environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="sb_icollection.html">Overview of the icollection+xpdacq environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Beamtime.html">Setting up your Beamtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Experiment.html">Setting up your XPD acuisition objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html">Where did all my Sample and Scan objects go?????</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-and-bt-get-are-your-friends">bt.list() and bt.get() are your friends</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Where.html#bt-list-and-bt-get-gotchas">bt.list() and bt.get() Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_Scan.html">ScanPlan objects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running scans</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#automated-dark-frame-collection">Automated dark frame collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automated-calibration-loading">Automated calibration loading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usb_QuickAssess.html">Initial assessment of your data</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_functionality.html">Useful Functionalities</a></li>
<li class="toctree-l2"><a class="reference internal" href="xPDFsuite_manual.html">Quick guide of calibration with xPDFsuite</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="beamlinestaff.html">Beamline Staff</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">xpdAcq</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="xpdusers.html">XPD Users</a> &raquo;</li>
      
    <li>Running scans</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/usb_Running.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-scans">
<span id="usb-running"></span><h1>Running scans<a class="headerlink" href="#running-scans" title="Permalink to this headline">¶</a></h1>
<p>The hard work of the experimental setup is now done.  It involved creating all the
rich metadata container and ScanPlan objects, but with this in the past it makes
it easy and low overhead to run the scans, allowing the experimenter to concentrate
on the science and not the experimental process.</p>
<p>To run scans there are just a few xpdAcq
run engines(functions) that you need.  To run a scan you simply pick the run engine you want
and give it a predefined Sample object and
a predefined ScanPlan object, then hit return and sit back, your scan will be carried out.</p>
<p>The allowed scan types are:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prun</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dark</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">background</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calibration</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">setupscan</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dryrun</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">scanplan</span><span class="p">)</span>
</pre></div>
</div>
<dl class="function">
<dt id="xpdacq.xpdacq.prun">
<code class="descclassname">xpdacq.xpdacq.</code><code class="descname">prun</code><span class="sig-paren">(</span><em>sample</em>, <em>scanplan</em>, <em>auto_dark=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.xpdacq.prun" title="Permalink to this definition">¶</a></dt>
<dd><p>on this sample run this scanplan</p>
<p>Sample, ScanPlan objects inside can be assigned in following way:</p>
<ol class="arabic simple">
<li>bt.get(&lt;object_index&gt;), eg. prun(bt.get(2), bt.get(5))</li>
<li>name of acquire object, eg. prun(&#8216;my_experiment&#8217;, &#8216;ct1s&#8217;)</li>
<li>index to acquire object, eg. prun(2,5)</li>
</ol>
<p>All of above assigning methods can be used in a mix way.</p>
<p>This scan will be labeled as prun in metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample</strong> (<em>xpdAcq.beamtime.Sample object</em>) &#8211; object carries metadata of Sample object</li>
<li><strong>scanplan</strong> (<em>xpdAcq.beamtime.ScanPlan object</em>) &#8211; object carries metadata of ScanPlan object</li>
<li><strong>auto_dark</strong> (<em>bool</em>) &#8211; option of automated dark collection. Default is True to allow collect dark automatically during scans</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><code class="docutils literal"><span class="pre">prun</span></code> stands for &#8220;production run&#8221; which is a normal run.</p>
<dl class="function">
<dt id="xpdacq.xpdacq.dark">
<code class="descclassname">xpdacq.xpdacq.</code><code class="descname">dark</code><span class="sig-paren">(</span><em>sample</em>, <em>scanplan</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.xpdacq.dark" title="Permalink to this definition">¶</a></dt>
<dd><p>on this sample, collect dark images.</p>
<p>Usually user don&#8217;t have to collect if you enable automated dark subtraction. However user can specifically collect it if you wish to.
Sample, ScanPlan objects inside can be assigned in following way:</p>
<ol class="arabic simple">
<li>bt.get(&lt;object_index&gt;), eg. dark(bt.get(2), bt.get(5))</li>
<li>name of acquire object, eg. dark(&#8216;my_experiment&#8217;, &#8216;ct1s&#8217;)</li>
<li>index to acquire object, eg. dark(2,5)</li>
</ol>
<p>All of above assigning methods can be used in a mix way.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sample</strong> (<em>xpdAcq.beamtime.Sample object</em>) &#8211; object carries metadata of Sample object</li>
<li><strong>scanplan</strong> (<em>xpdAcq.beamtime.ScanPlan object</em>) &#8211; object carries metadata of ScanPlan object</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; dictionary that will be passed through to the run-engine metadata</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dark_uid</strong> &#8211; an unique id to label this dark scan</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><code class="docutils literal"><span class="pre">dark</span></code> collects dark frames.Strictly speaking the sample is irrelevant here because the shutter is closed, but
it is left in the definition for consistency and in general <code class="docutils literal"><span class="pre">dark</span></code> is not necessary as automated dark subtraction collect dark images for you.</p>
<dl class="function">
<dt id="xpdacq.xpdacq.calibration">
<code class="descclassname">xpdacq.xpdacq.</code><code class="descname">calibration</code><span class="sig-paren">(</span><em>sample</em>, <em>scanplan</em>, <em>auto_dark=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.xpdacq.calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>on this calibration sample (calibrant) run this scanplan</p>
<p>Sample, ScanPlan objects inside can be assigned in following way:</p>
<ol class="arabic simple">
<li>bt.get(&lt;object_index&gt;), eg. calibration(bt.get(2), bt.get(5))</li>
<li>name of acquire object, eg. calibration(&#8216;my_experiment&#8217;, &#8216;ct1s&#8217;)</li>
<li>index to acquire object, eg. calibration(2,5)</li>
</ol>
<p>All of above assigning methods can be used in a mix way.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample</strong> (<em>xpdAcq.beamtime.Sample object</em>) &#8211; object carries metadata of Sample object</li>
<li><strong>scanplan</strong> (<em>xpdAcq.beamtime.ScanPlan object</em>) &#8211; object carries metadata of ScanPlan object</li>
<li><strong>auto_dark</strong> (<em>bool</em>) &#8211; option of automated dark collection. Default is True to allow collect dark automatically during scans</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><code class="docutils literal"><span class="pre">calibration</span></code> is specifically designed to collect image on your calibrants.</p>
<dl class="function">
<dt id="xpdacq.xpdacq.setupscan">
<code class="descclassname">xpdacq.xpdacq.</code><code class="descname">setupscan</code><span class="sig-paren">(</span><em>sample</em>, <em>scanplan</em>, <em>auto_dark=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.xpdacq.setupscan" title="Permalink to this definition">¶</a></dt>
<dd><p>on this sample run this scanplan as a setupscan</p>
<p>Sample, ScanPlan objects inside can be assigned in following way:</p>
<ol class="arabic simple">
<li>bt.get(&lt;object_index&gt;), eg. setupscan(bt.get(2), bt.get(5))</li>
<li>name of acquire object, eg. setupscan(&#8216;my_experiment&#8217;, &#8216;ct1s&#8217;)</li>
<li>index to acquire object, eg. setupscan(2,5)</li>
</ol>
<p>All of above assigning methods can be used in a mix way.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample</strong> (<em>xpdAcq.beamtime.Sample object</em>) &#8211; object carries metadata of Sample object</li>
<li><strong>scanplan</strong> (<em>xpdAcq.beamtime.ScanPlan object</em>) &#8211; object carries metadata of ScanPlan object</li>
<li><strong>auto_dark</strong> &#8211; option of automated dark collection. Default is None so that dark frame will be collected automatically during scans</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; dictionary that will be passed through to the run-engine metadata</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><code class="docutils literal"><span class="pre">setupscan</span></code> is for testing things before you are ready to get production data, such as trying out different exposures
on a sample to find the best exposure time.</p>
<dl class="function">
<dt id="xpdacq.xpdacq.dryrun">
<code class="descclassname">xpdacq.xpdacq.</code><code class="descname">dryrun</code><span class="sig-paren">(</span><em>sample</em>, <em>scanplan</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#xpdacq.xpdacq.dryrun" title="Permalink to this definition">¶</a></dt>
<dd><p>on this sample run this scanplan in dryrun mode</p>
<p>with dryrun mode, only metadata will be printed. No real experimental apparatus will be triggered.</p>
<p>Sample, ScanPlan objects inside can be assigned in following way:</p>
<ol class="arabic simple">
<li>bt.get(&lt;object_index&gt;), eg. dryrun(bt.get(2), bt.get(5))</li>
<li>name of acquire object, eg. dryrun(&#8216;my_experiment&#8217;, &#8216;ct1s&#8217;)</li>
<li>index to acquire object, eg. dryrun(2,5)</li>
</ol>
<p>All of above assigning methods can be used in a mix way.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sample</strong> (<em>xpdAcq.beamtime.Sample object</em>) &#8211; object carries metadata of Sample object</li>
<li><strong>scanplan</strong> (<em>xpdAcq.beamtime.ScanPlan object</em>) &#8211; object carries metadata of ScanPlan object</li>
<li><strong>**kwargs</strong> (<em>dict</em>) &#8211; dictionary that will be passed through to the run-engine metadata</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><code class="docutils literal"><span class="pre">dryrun</span></code> does not execute any scan but tells you what is going to be run when you give the same Sample and Scan objects
to any of the other runs. It may be used for validating your scan objects, and also for estimating how long a <code class="docutils literal"><span class="pre">tseries</span></code> or <code class="docutils literal"><span class="pre">Tramp</span></code> might take.</p>
<p>Here are some examples of a workflow.  Assume a GaAs sample is loaded on the diffractometer
and the <code class="docutils literal"><span class="pre">'GaAs'</span></code> Sample object is created as well as all the ScanPlans we need.
We will start by doing a dry-run on our <code class="docutils literal"><span class="pre">'ct2'</span></code> count ScanPlan.</p>
<p>Remember, always start with <code class="docutils literal"><span class="pre">bt.list()</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bt</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">bt object bt has list index  0</span>
<span class="go">ex object InGaAsAlloyPD has list index  1</span>
<span class="go">ex object ProteinFolding has list index  2</span>
<span class="go">sa object GaAs has list index  3</span>
<span class="go">sa object IGA75-25 has list index  4</span>
<span class="go">sa object In0.25Ga0.75As has list index  5</span>
<span class="go">sa object InAs has list index  6</span>
<span class="go">sa object InGaAs-5050 has list index  7</span>
<span class="go">sc object ct1.5 has list index  8</span>
<span class="go">sc object ct1.5_nosh has list index  9</span>
<span class="go">sc object ct100.5_nolt has list index  10</span>
<span class="go">sc object ct2 has list index  11</span>
<span class="go">sc object ct2_vw has list index  12</span>
<span class="go">sc object ct2_vw_nos has list index  13</span>
<span class="go">sc object ct2_vw_nosh has list index  14</span>
<span class="go">Use bt.get(index) to get the one you want</span>
</pre></div>
</div>
<p>The Sample object I want has list index 3 and the ScanPlan has list index 11.
Let&#8217;s try a dryrun to make sure everything is ok.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dryrun</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<span class="go">INFO: requested exposure time =  2.0  -&gt; computed exposure time: 2.0</span>
<span class="go">=== dryrun mode ===</span>
<span class="go">this will execute a single bluesky Count type scan</span>
<span class="go">Sample metadata: Sample name = GaAs</span>
<span class="go">using the &quot;pe1c&quot; detector (Perkin-Elmer in continuous acquisition mode)</span>
<span class="go">in the form of 20 frames of 0.1 s summed into a single event</span>
<span class="go">(i.e. accessible as a single tiff file)</span>
</pre></div>
</div>
<p>OK, it seems to work, lets do some testing to see how much intensity we need.
We will do three setup scans with 1.5 seconds and 100.5 seconds exposure
and then compare them.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">setupscan</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>   <span class="c1">#1.5 seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">setupscan</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1">#100.5 seconds</span>
<span class="go">INFO: requested exposure time =  1.5  -&gt; computed exposure time: 1.5</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|   seq_num |       time | pe1_stats1_total |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|         1 | 10:49:31.3 |                0 |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">Count [&#39;e7adbd&#39;] (scan num: 1)</span>
<span class="go">INFO: requested exposure time =  100.5  -&gt; computed exposure time: 100.5</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|   seq_num |       time | pe1_stats1_total |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|         1 | 10:49:41.3 |                0 |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">Count [&#39;e7adbd&#39;] (scan num: 2)</span>
</pre></div>
</div>
<p>what is nice about these is that they are tagged with an <code class="docutils literal"><span class="pre">sc_isprun':False</span></code> metadata field
which means that, by default, they will not be retrieved when searching for production data.  It
keeps our setup scans and production scans nicely separated in the database, though
the underlying scans that are carried out are all still there and can be retrieved if need
be.</p>
<p>It seems that the 2 second scans are the best, so let&#8217;s do a production run
to get the first data-set.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prun</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>  <span class="c1">#2 seconds</span>
<span class="go">INFO: auto_dark didn&#39;t detect a valid dark, so is collecting a new dark frame.</span>
<span class="go">See documentation at http://xpdacq.github.io for more information about controlling this behavior</span>
<span class="go">INFO: requested exposure time =  2.0  -&gt; computed exposure time: 2.0</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|   seq_num |       time | pe1_stats1_total |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|         1 | 10:51:36.6 |                0 |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">Count [&#39;d475dc&#39;] (scan num: 1)</span>
<span class="go">INFO: requested exposure time =  2.0  -&gt; computed exposure time: 2.0</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|   seq_num |       time | pe1_stats1_total |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">|         1 | 10:51:42.4 |                0 |</span>
<span class="go">+-----------+------------+------------------+</span>
<span class="go">Count [&#39;e7adbd&#39;] (scan num: 2)</span>
</pre></div>
</div>
<div class="section" id="automated-dark-frame-collection">
<span id="auto-dark-collect"></span><h2>Automated dark frame collection<a class="headerlink" href="#automated-dark-frame-collection" title="Permalink to this headline">¶</a></h2>
<p>So far, you might have found something weird from the output shown above.
We only requested <em>one</em> <code class="docutils literal"><span class="pre">prun</span></code> but program runs <em>two</em> scans. So what happen?</p>
<p>That is actually a wonderful feature called auto-dark subtraction of <code class="docutils literal"><span class="pre">xpdAcq</span></code>.
When you are running your experiment, <code class="docutils literal"><span class="pre">xpdAcq</span></code> actually checks if you have
collected a <strong>fresh</strong> dark frame every time it collects a scan.
The definition of <strong>fresh</strong> is:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Given a certain period T (called dark window), there is a dark frame
with the same exposure time as the light frame we are about collect.
</pre></div>
</div>
<p>Automated dark collection is enabled by default and it can be turned off
by either of these ways:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glbl</span><span class="o">.</span><span class="n">auto_dark</span> <span class="o">=</span> <span class="bp">False</span> <span class="c1"># turn it off for all scans measured afterwards</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prun</span><span class="p">(</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">bt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="n">auto_dark</span> <span class="o">=</span> <span class="bp">False</span><span class="p">)</span> <span class="c1"># only turn it off for this scan</span>
</pre></div>
</div>
<p>And period of dark window can be modified by:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glbl</span><span class="o">.</span><span class="n">dk_window</span> <span class="o">=</span> <span class="mi">200</span> <span class="c1"># in minutes. default is 3000 minutes</span>
</pre></div>
</div>
<p>Having <code class="docutils literal"><span class="pre">auto_dark</span></code> set to <code class="docutils literal"><span class="pre">True</span></code> is strongly recommended as this enables
<code class="docutils literal"><span class="pre">xpdAcq</span></code> to do automated dark frame subtraction when you pull out data from
centralized <strong>NSLSL-II</strong> server.</p>
</div>
<div class="section" id="automated-calibration-loading">
<span id="auto-calib"></span><h2>Automated calibration loading<a class="headerlink" href="#automated-calibration-loading" title="Permalink to this headline">¶</a></h2>
<p>Often times, keeping track with which calibration file is associated with
certain scan is very tiring. <code class="docutils literal"><span class="pre">xpdAcq</span></code> makes this easier for you. Before every
scan is being collected, program goes to grab the most recent calibration
parameters in <code class="docutils literal"><span class="pre">/home/xf28id1/xpdUser/config_base</span></code> and load them as part of
metadata so that you can reference them whenever you want and make in-situ data
reduction possible!</p>
<p>Let&#8217;s <a class="reference internal" href="usb_QuickAssess.html#usb-quickassess"><span class="std std-ref">take a quick look at our data</span></a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usb_QuickAssess.html" class="btn btn-neutral float-right" title="Initial assessment of your data" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usb_Scan.html" class="btn btn-neutral" title="ScanPlan objects" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright (c) 2016 trustees of Columbia University in the City of New York.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>